version: '3.8'

services:
  qdrant:
    image: qdrant/qdrant:latest
    container_name: chess-rag-qdrant
    ports:
      - "6333:6333"  # REST API
      - "6334:6334"  # gRPC API (optional)
    volumes:
      - ./qdrant_docker_storage:/qdrant/storage
    environment:
      - QDRANT_ALLOW_RECOVERY=true
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:6333/health"]
      interval: 10s
      timeout: 5s
      retries: 5
      start_period: 30s

# Usage:
#   Start:   docker-compose up -d
#   Stop:    docker-compose down
#   Logs:    docker-compose logs -f qdrant
#   Restart: docker-compose restart qdrant
#
# Qdrant will be available at:
#   REST API: http://localhost:6333
#   Dashboard: http://localhost:6333/dashboard
#
# Data is persisted in: ./qdrant_docker_storage/
